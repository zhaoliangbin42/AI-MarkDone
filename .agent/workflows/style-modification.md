---
description: AI æ ·å¼ä¿®æ”¹å·¥ä½œæµ - ç”¨äºæ–°å¢æˆ–ä¿®æ”¹ç»„ä»¶æ ·å¼æ—¶å¿…é¡»ä¸¥æ ¼éµå¾ªçš„æµç¨‹
---

# æ ·å¼ä¿®æ”¹ Workflow (Style Modification)

> **å¼ºåˆ¶çº¦æŸ**: æœ¬ Workflow æ˜¯æ‰€æœ‰æ ·å¼ä¿®æ”¹çš„å”¯ä¸€å…¥å£ï¼Œè¿åä»»ä½•æ­¥éª¤å°†å¯¼è‡´ä»£ç å®¡æŸ¥å¤±è´¥ã€‚
> **é€‚ç”¨èŒƒå›´**: æ‰€æœ‰ UI ç»„ä»¶ã€é¢æ¿ã€å¼¹çª—ã€æŒ‰é’®ã€å›¾æ ‡ç­‰è§†è§‰å…ƒç´ çš„æ ·å¼ä¿®æ”¹ã€‚
> **æ‰«æè§„åˆ™**: è¯¦è§ `docs/antigravity/style/SCAN_RULES.md`

---

## ğŸ“‹ Phase 0: å¼ºåˆ¶å‰ç½®æ£€æŸ¥

**åœ¨ä»»ä½•ä¿®æ”¹ä¹‹å‰ï¼Œå¿…é¡»å®Œæˆä»¥ä¸‹æ‰€æœ‰æ­¥éª¤ã€‚è·³è¿‡ä»»ä½•ä¸€æ­¥éƒ½æ˜¯ç¦æ­¢çš„ã€‚**

### 0.1 é˜…è¯»å‚è€ƒæ–‡æ¡£
// turbo
```bash
# æŸ¥çœ‹ Token è§„èŒƒ (å¿…è¯»)
cat docs/antigravity/style/TOKEN_REFERENCE.md

# æŸ¥çœ‹è¸©å‘ç»éªŒ (å¿…è¯»)
cat docs/antigravity/style/LESSONS_LEARNED.md

# æŸ¥çœ‹å›¾æ ‡è§„èŒƒ (å¦‚æ¶‰åŠå›¾æ ‡)
cat docs/antigravity/style/ICON_GUIDELINES.md

# æŸ¥çœ‹ AI å¼€å‘è§„åˆ™ (é€šç”¨è§„åˆ™)
cat docs/antigravity/AI_DEVELOPMENT_RULES.md
```

### 0.2 ç¡®è®¤ä¿®æ”¹èŒƒå›´
```bash
# åˆ—å‡ºæ‰€æœ‰å¯èƒ½æ¶‰åŠæ ·å¼çš„æ–‡ä»¶
find src -name "*.ts" -exec grep -l "style" {} \; | head -20
```

---

## ğŸ” Phase 1: å…¨å±€æ‰«æ (å¿…é¡»å®Œæ•´æ‰§è¡Œ)

> **è§„åˆ™**: ä»»ä½•æ ·å¼ç›¸å…³ Token éƒ½å¿…é¡»ç»è¿‡å…¨å±€æ‰«æç¡®è®¤ï¼Œä¸å…è®¸å‡è®¾ã€‚
> **é‡è¦**: å¤§æ–‡ä»¶å¿…é¡»åˆ†æ®µè¯»å–ï¼Œç¡®ä¿å®Œæ•´è¦†ç›–ã€‚

### 1.1 å¤§æ–‡ä»¶åˆ†æ®µè¯»å–ç­–ç•¥

**é—®é¢˜**: AI ä¸Šä¸‹æ–‡æœ‰é™ï¼Œæ— æ³•ä¸€æ¬¡è¯»å–è¶…è¿‡ 800 è¡Œçš„æ–‡ä»¶ã€‚

**è§£å†³æ–¹æ¡ˆ**: åˆ†æ®µè¯»å–ç›®æ ‡æ–‡ä»¶

```bash
# Step 1: è·å–æ–‡ä»¶æ€»è¡Œæ•°
wc -l ç›®æ ‡æ–‡ä»¶.ts

# Step 2: è·å–æ–‡ä»¶å¤§çº² (ç±»/å‡½æ•°åˆ—è¡¨)
# ä½¿ç”¨ view_file_outline å·¥å…·è·å–æ–‡ä»¶ç»“æ„
```

**åˆ†æ®µè¯»å–æµç¨‹**:

| æ­¥éª¤ | æ“ä½œ | è¯´æ˜ |
|------|------|------|
| 1 | `view_file_outline` | è·å–æ–‡ä»¶ç»“æ„å’Œå‡½æ•°åˆ—è¡¨ |
| 2 | è®¡ç®—åˆ†æ®µ | æŒ‰ 500-800 è¡Œ/æ®µåˆ’åˆ† |
| 3 | é¡ºåºè¯»å– | ä½¿ç”¨ `view_file` çš„ StartLine/EndLine å‚æ•° |
| 4 | è®°å½•å‘ç° | æ¯æ®µè®°å½• Token/é€‰æ‹©å™¨å‡ºç°ä½ç½® |

**ç¤ºä¾‹** (6000 è¡Œæ–‡ä»¶):
```
Segment 1: view_file 1-800
Segment 2: view_file 801-1600
Segment 3: view_file 1601-2400
...
Segment 8: view_file 5601-6000
```

**å¿…é¡»**:
- æ¯æ®µéƒ½è¦æ£€æŸ¥ç›®æ ‡ Token/é€‰æ‹©å™¨
- è®°å½•æ‰€æœ‰å‘ç°çš„è¡Œå·
- ä¸å…è®¸è·³è¿‡ä»»ä½•æ®µè½

### 1.2 æ‰«æè§„åˆ™

æ‰§è¡Œä»¥ä¸‹æ‰€æœ‰æ‰«æå‘½ä»¤ï¼Œè®°å½•ç»“æœï¼š

```bash
# 1. æ‰«æç›®æ ‡ Token çš„æ‰€æœ‰ä½¿ç”¨ä½ç½®
grep -rn "ç›®æ ‡Tokenå" src/ --include="*.ts" --include="*.css"

# 2. æ‰«æç›®æ ‡é€‰æ‹©å™¨çš„æ‰€æœ‰å®šä¹‰
grep -rn "\.ç›®æ ‡é€‰æ‹©å™¨" src/ --include="*.ts" --include="*.css"

# 3. æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤å®šä¹‰
grep -c "ç›®æ ‡é€‰æ‹©å™¨" ç›®æ ‡æ–‡ä»¶ 

# 4. ç¡®è®¤ Token åœ¨ design-tokens.ts ä¸­å­˜åœ¨
grep -n "ç›®æ ‡Token" src/utils/design-tokens.ts
```

### 1.3 æ‰«æå®Œæ•´æ€§æ£€æŸ¥

å¿…é¡»å›ç­”ä»¥ä¸‹é—®é¢˜ï¼Œå¦åˆ™ä¸å…è®¸è¿›å…¥ä¸‹ä¸€é˜¶æ®µï¼š

| # | é—®é¢˜ | å¿…é¡»ç¡®è®¤ |
|---|------|---------|
| 1 | ç›®æ ‡ Token æ˜¯å¦åœ¨ design-tokens.ts ä¸­å®šä¹‰? | âœ… æ˜¯ |
| 2 | æœ‰å¤šå°‘æ–‡ä»¶ä½¿ç”¨äº†è¿™ä¸ª Token/é€‰æ‹©å™¨? | è®°å½•æ•°é‡ |
| 3 | æ˜¯å¦æœ‰é‡å¤å®šä¹‰? | åˆ—å‡ºè¡Œå· |
| 4 | Mock æ–‡ä»¶ä¸­æ˜¯å¦æœ‰å¯¹åº”ä»£ç ? | ç¡®è®¤è·¯å¾„ |
| 5 | å¤§æ–‡ä»¶æ˜¯å¦å®Œæ•´åˆ†æ®µè¯»å–? | âœ… æ˜¯ |

---

## ğŸ¯ Phase 2: Token éªŒè¯

### 2.1 Token å±‚çº§è§„åˆ™

| å±‚çº§ | å‰ç¼€ | å…è®¸ç›´æ¥ä½¿ç”¨ | ç¤ºä¾‹ |
|-----|------|-------------|------|
| **è¯­ä¹‰å±‚** | `--aimd-bg-*`, `--aimd-text-*` | âœ… æ˜¯ | `--aimd-bg-primary` |
| **åŸå§‹å±‚** | `--aimd-color-*` | âŒ ç¦æ­¢ | `--aimd-color-gray-100` |

### 2.2 ç¦æ­¢ä½¿ç”¨çš„ Token

ä»¥ä¸‹ Token **ç»å¯¹ç¦æ­¢**åœ¨æ ·å¼ä¸­ä½¿ç”¨ï¼š

```
âŒ --aimd-color-gray-*    â†’ ä½¿ç”¨ --aimd-bg-* æˆ– --aimd-text-*
âŒ --aimd-radius-small    â†’ ä½¿ç”¨ --aimd-radius-lg
âŒ --aimd-radius-medium   â†’ ä½¿ç”¨ --aimd-radius-xl
âŒ --aimd-radius-large    â†’ ä½¿ç”¨ --aimd-radius-2xl
```

### 2.3 Token å­˜åœ¨æ€§éªŒè¯
// turbo
```bash
# ç¡®è®¤ Token å­˜åœ¨
grep "ä½ è¦ä½¿ç”¨çš„token" src/utils/design-tokens.ts
```

å¦‚æœè¿”å›ç©ºï¼Œ**åœæ­¢ä¿®æ”¹**ï¼Œè¯¥ Token ä¸å­˜åœ¨ã€‚

---

## ğŸ–¼ï¸ Phase 3: å›¾æ ‡è§„èŒƒ (å¦‚æ¶‰åŠ)

### 3.1 å›¾æ ‡å­˜å‚¨è§„åˆ™

| è§„åˆ™ | è¯´æ˜ |
|------|------|
| **å”¯ä¸€å­˜å‚¨ä½ç½®** | `src/assets/icons.ts` |
| **æ ¼å¼** | SVG å­—ç¬¦ä¸²å¯¼å‡º |
| **å‘½åè§„èŒƒ** | `camelCase` + `Icon` åç¼€ (å¦‚ `bookmarkIcon`) |

### 3.2 æ–°å¢å›¾æ ‡æµç¨‹

1. **ç¦æ­¢**: åˆ›å»ºæ–°çš„ `.svg` æ–‡ä»¶
2. **ç¦æ­¢**: åœ¨ç»„ä»¶ä¸­å†…è” SVG
3. **å¿…é¡»**: å°† SVG å­—ç¬¦ä¸²æ·»åŠ åˆ° `src/assets/icons.ts`

```typescript
// æ­£ç¡®ç¤ºä¾‹
export const newIcon = `<svg xmlns="http://www.w3.org/2000/svg" ...>...</svg>`;
```

### 3.3 ä½¿ç”¨å›¾æ ‡
```typescript
import { newIcon } from '@/assets/icons';
element.innerHTML = newIcon;
```

---

## âœï¸ Phase 4: æ‰§è¡Œä¿®æ”¹

### 4.1 ç»å¯¹ç¦æ­¢çš„æ“ä½œ

| # | ç¦æ­¢æ“ä½œ | åŸå›  |
|---|---------|------|
| 1 | ä½¿ç”¨ `sed` å‘½ä»¤ | æ‰¹é‡æ›¿æ¢ä¸å¯æ§ |
| 2 | ä½¿ç”¨ `git checkout` å›æ»š | ç”¨æˆ·æ˜ç¡®ç¦æ­¢ |
| 3 | æ·»åŠ  `!important` | ç ´å CSS å±‚å  |
| 4 | ä¸éªŒè¯ build å°±æŠ¥å‘Šå®Œæˆ | å¯èƒ½æœ‰è¯­æ³•é”™è¯¯ |
| 5 | å‡è®¾ Token å­˜åœ¨ | å¿…é¡»æœç´¢ç¡®è®¤ |
| 6 | ä»…ä¿®æ”¹ä¸€å¤„é‡å¤å®šä¹‰ | å¿…é¡»å…¨éƒ¨ç»Ÿä¸€ |

### 4.2 å…è®¸çš„æ“ä½œ

| æ“ä½œ | è¯´æ˜ |
|------|------|
| `replace_file_content` | ç²¾ç¡®æ›¿æ¢å•å¤„ |
| `multi_replace_file_content` | æ›¿æ¢åŒæ–‡ä»¶å¤šå¤„ (éæ‰¹é‡) |
| å•ä¸ª Token åç§°æ›¿æ¢ | å¦‚ `radius-small` â†’ `radius-lg` |

### 4.3 ä¿®æ”¹æ£€æŸ¥æ¸…å•

æ¯æ¬¡ä¿®æ”¹åå¿…é¡»ç¡®è®¤ï¼š

- [ ] æ‰€æœ‰é‡å¤å®šä¹‰éƒ½å·²ç»Ÿä¸€ä¿®æ”¹
- [ ] æ²¡æœ‰å¼•å…¥æ— æ•ˆ Token
- [ ] æ²¡æœ‰ç¡¬ç¼–ç å€¼ (é¢œè‰²/å°ºå¯¸)
- [ ] Mock æ–‡ä»¶å·²åŒæ­¥

---

## ğŸ”„ Phase 5: åŒæ­¥ä¸éªŒè¯

### 5.1 åŒæ­¥ Mock æ–‡ä»¶

å¦‚æœä¿®æ”¹äº†ä»»ä½• TypeScript ç»„ä»¶ä¸­çš„æ ·å¼ï¼Œå¿…é¡»åŒæ­¥ï¼š

```bash
# æ£€æŸ¥ mock ä¸­æ˜¯å¦æœ‰ç›¸åŒå®šä¹‰
grep -n "ä¿®æ”¹çš„é€‰æ‹©å™¨æˆ–Token" mocks/*.html
```

### 5.2 Build éªŒè¯
// turbo
```bash
npm run build
```

**Build å¤±è´¥æ—¶ç¦æ­¢æŠ¥å‘Šå®Œæˆã€‚**

### 5.3 æœ€ç»ˆéªŒæ”¶æ‰«æ
// turbo
```bash
# ç¡®è®¤æ²¡æœ‰å‰©ä½™çš„æ—§ç‰ˆ Token
echo "=== æ£€æŸ¥æ— æ•ˆ Token ===" 
grep -c "aimd-color-gray\|aimd-radius-small\|aimd-radius-medium\|aimd-radius-large" src/**/*.ts || echo "0 - é€šè¿‡"
```

---

## ğŸ“ å‚è€ƒæ–‡æ¡£è·¯å¾„

| æ–‡æ¡£ | è·¯å¾„ | å†…å®¹ |
|------|------|------|
| Token è§„èŒƒ | `docs/antigravity/style/TOKEN_REFERENCE.md` | æ‰€æœ‰å¯ç”¨ Token |
| è¸©å‘ç»éªŒ | `docs/antigravity/style/LESSONS_LEARNED.md` | å†å²é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ |
| å›¾æ ‡è§„èŒƒ | `docs/antigravity/style/ICON_GUIDELINES.md` | å›¾æ ‡å­˜å‚¨ä¸ä½¿ç”¨è§„åˆ™ |
| AI è§„åˆ™ | `docs/antigravity/AI_DEVELOPMENT_RULES.md` | é€šç”¨å¼€å‘è§„èŒƒ |
| è®¾è®¡ Token | `src/utils/design-tokens.ts` | Token å®šä¹‰æºç  |

---

## ğŸš« è¿è§„å¤„ç†

è¿åæœ¬ Workflow çš„ä»»ä½•æ­¥éª¤å°†å¯¼è‡´ï¼š
1. ä»£ç å˜æ›´è¢«æ‹’ç»
2. å¿…é¡»é‡æ–°æ‰§è¡Œå®Œæ•´æµç¨‹
3. è®°å½•åˆ°è¿è§„æ—¥å¿—

---

## ğŸ“ ä¿®æ”¹è®°å½•æ¨¡æ¿

æ¯æ¬¡æ ·å¼ä¿®æ”¹å®Œæˆåï¼Œå¿…é¡»è®°å½•ï¼š

```markdown
## ä¿®æ”¹è®°å½•
- æ—¥æœŸ: YYYY-MM-DD
- ç›®æ ‡: [æè¿°ä¿®æ”¹ç›®æ ‡]
- æ‰«æç»“æœ: [æ¶‰åŠ X ä¸ªæ–‡ä»¶ï¼ŒY å¤„å®šä¹‰]
- ä¿®æ”¹å†…å®¹: [å…·ä½“ä¿®æ”¹]
- éªŒè¯: [build ç»“æœ]
```
